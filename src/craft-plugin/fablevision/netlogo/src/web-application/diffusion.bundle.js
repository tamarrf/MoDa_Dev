(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["diffusion"],{"51f8":function(e,t,n){"use strict";n.r(t),n.d(t,"diffusion",(function(){return l}));var a=n("42f0"),o=(n("b8ff"),n("6c38"),n("fd25"),n("ee71"),n("a468"),n("e668")),i=n.n(o),s=n("4562"),l={};function r(e,t,n){var a=n.newBlock(e);a.appendStatementInput("EXPANDED_STATEMENT"),c(t,a.getInput("EXPANDED_STATEMENT").connection,n);var o=s["a"].blockToCode(a.getInput("EXPANDED_STATEMENT").connection.targetBlock());return a.dispose(),o}function c(e,t,n){var o,i=Object(a["a"])(e.reverse());try{for(i.s();!(o=i.n()).done;){var s=o.value,l=n.newBlock(s.blockType);for(var r in s.fields)l.getField(r)&&l.setFieldValue(s.fields[r],r);var p=l.previousConnection;if(t&&t.connect(p),s.condition){var d=n.newBlock(s.condition.blockType);l.getInput(s.condition.input).connection.connect(d.outputConnection),s.condition.field&&d.setFieldValue(s.condition.field.value,s.condition.field.name)}s.children&&c(s.children,l.inputList[1].connection,n)}}catch(u){i.e(u)}finally{i.f()}}l={categories:[{kind:"category",name:"Diffusion",expanded:!0,contents:[{kind:"category",name:"Properties",toolboxitemid:"propertiesUnpackable",categorystyle:"particles_category",contents:[{kind:"block",type:"create_particles"},{kind:"block",type:"set_speed"},{kind:"block",type:"set_type"},{kind:"block",type:"set_mass"},{kind:"block",type:"set_color"},{kind:"block",type:"set_size"},{kind:"block",type:"set_position"},{kind:"block",type:"set_heading"}]},{kind:"category",name:"Action",toolboxitemid:"actionsUnpackable",categorystyle:"behavior_category",contents:[{kind:"block",type:"move"},{kind:"block",type:"interact"},{kind:"block",type:"bounce_off"},{kind:"block",type:"erase"},{kind:"block",type:"attach"}]},{kind:"category",name:"Control",colour:"#0089B8",contents:[{kind:"block",type:"ask_each_particle"},{kind:"block",type:"temperature"},{kind:"block",type:"touching_dropdown"}]}]}]},i.a.Blocks["create_particles"]={init:function(){this.jsonInit({message0:"create  %1 %2 particles %3",args0:[{type:"field_slider",name:"PARTICLE_NUM",value:100,min:0,max:500},{type:"field_dropdown",name:"TYPE",options:[["water","WATER"],["ink","INK"]]},{type:"input_dummy",name:"EMPTY"}],previousStatement:null,nextStatement:null,style:"particle_blocks",mutator:"general_mutator"});var e={unpackBlocks:[{blockType:"set_speed",fields:{SPEED:"TEMP"}},{blockType:"set_position",fields:{POSITION:"RANDOM"}},{blockType:"set_heading",fields:{HEADING:"RANDOM"}},{blockType:"set_mass",fields:{MASS:"MEDIUM"}},{blockType:"set_color",fields:{COLOR:"WATER"===this.getFieldValue("TYPE")?"CYAN":"RED"}},{blockType:"set_size",fields:{SIZE:"MEDIUM"}}],contextData:{CHANGED:!1},contentXml:""};this.data=JSON.stringify(e)},onchange:function(){var e=JSON.parse(this.data);if(this.getInput("EXPANDED_STATEMENT")){var t,n=0,o=Object(a["a"])(this.getChildren());try{for(o.s();!(t=o.n()).done;){var s=t.value;s.getSurroundParent()===this&&(0===n?e.contentXml=i.a.Xml.domToText(i.a.Xml.blockToDom(s)):e.contentXml+=i.a.Xml.domToText(i.a.Xml.blockToDom(s)),++n)}}catch(l){o.e(l)}finally{o.f()}}e.contextData["CHANGED"]||(e.unpackBlocks=[{blockType:"set_speed",fields:{SPEED:"TEMP"}},{blockType:"set_position",fields:{POSITION:"RANDOM"}},{blockType:"set_heading",fields:{HEADING:"RANDOM"}},{blockType:"set_mass",fields:{MASS:"MEDIUM"}},{blockType:"set_color",fields:{COLOR:"WATER"===this.getFieldValue("TYPE")?"CYAN":"RED"}},{blockType:"set_size",fields:{SIZE:"MEDIUM"}}]),this.data=JSON.stringify(e)}},i.a.Blocks["interact"]={init:function(){this.jsonInit({message0:"interact %1",args0:[{type:"input_dummy",name:"EMPTY"}],inputsInline:!0,previousStatement:null,nextStatement:null,mutator:"general_mutator",style:"behavior_border"});var e={unpackBlocks:[{blockType:"controls_if",fields:{},condition:{input:"IF0",blockType:"touching_dropdown",field:{name:"TYPE",value:"WALL"}},children:[{blockType:"bounce_off",fields:{}}]},{blockType:"controls_if",fields:{},condition:{input:"IF0",blockType:"touching_dropdown",field:{name:"TYPE",value:"ANYPARTICLE"}},children:[{blockType:"bounce_off",fields:{}}]}],contextData:{CHANGED:!1},contentXml:""};this.data=JSON.stringify(e)},onchange:function(){if(this.getInput("EXPANDED_STATEMENT")){var e,t=JSON.parse(this.data),n=0,o=Object(a["a"])(this.getChildren());try{for(o.s();!(e=o.n()).done;){var s=e.value;s.getSurroundParent()===this&&(0===n?t.contentXml=i.a.Xml.domToText(i.a.Xml.blockToDom(s)):t.contentXml+=i.a.Xml.domToText(i.a.Xml.blockToDom(s)),++n)}}catch(l){o.e(l)}finally{o.f()}this.data=JSON.stringify(t)}}},i.a.defineBlocksWithJsonArray([{type:"create_particles1",message0:"create  %1 %2 particles %3",args0:[{type:"field_dropdown",name:"TYPE",options:[["water","WATER"],["ink","INK"]]},{type:"field_slider",name:"PARTICLE_NUM",value:100,min:0,max:500},{type:"input_dummy",name:"EMPTY"}],previousStatement:null,nextStatement:null,style:"particle_blocks"},{type:"set_speed",message0:"set speed %1",args0:[{type:"field_dropdown",name:"SPEED",options:[["zero","ZERO"],["low","LOW"],["medium","MEDIUM"],["high","HIGH"],["initial temperature","TEMP"]]}],previousStatement:null,nextStatement:null,style:"particle_border"},{type:"set_type",message0:"set type %1",args0:[{type:"field_dropdown",name:"TYPE",options:[["water","WATER"],["ink","INK"]]}],previousStatement:null,nextStatement:null,style:"particle_border"},{type:"set_mass",message0:"set mass %1",args0:[{type:"field_dropdown",name:"MASS",options:[["light","LIGHT"],["medium","MEDIUM"],["heavy","HEAVY"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"particle_border",tooltip:"pick a value between 0 and 5"},{type:"set_color",message0:"set color %1",args0:[{type:"field_dropdown",name:"COLOR",options:[["red","RED"],["orange","ORANGE"],["yellow","YELLOW"],["green","GREEN"],["blue","BLUE"],["cyan","CYAN"],["violet","VIOLET"],["gray","GRAY"],["black","BLACK"],["brown","BROWN"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"particle_border"},{type:"set_size",message0:"set size %1",args0:[{type:"field_dropdown",name:"SIZE",options:[["small","SMALL"],["medium","MEDIUM"],["big","BIG"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"particle_border"},{type:"set_position",message0:"set position %1",args0:[{type:"field_dropdown",name:"POSITION",options:[["random","RANDOM"],["center","CENTER"],["vertical line","VERTICAL"],["horizontal line","HORIZONTAL"],["mouse position","MOUSE"]]}],previousStatement:null,nextStatement:null,style:"particle_border"},{type:"set_heading",message0:"set heading %1",args0:[{type:"field_dropdown",name:"HEADING",options:[["random","RANDOM"],["up","UP"],["right","RIGHT"],["down","DOWN"],["left","LEFT"]]}],previousStatement:null,nextStatement:null,style:"particle_border"},{type:"move",message0:"move",inputsInline:!0,previousStatement:null,nextStatement:null,style:"behavior_border"},{type:"collision1",message0:"interact %1",args0:[{type:"input_dummy",name:"EMPTY"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"behavior_border"},{type:"bounce_off",message0:"bounce off",inputsInline:!0,previousStatement:null,nextStatement:null,style:"behavior_blocks"},{type:"erase",message0:"erase particles",inputsInline:!0,previousStatement:null,nextStatement:null,style:"behavior_blocks"},{type:"attach",message0:"attach particles",inputsInline:!0,previousStatement:null,nextStatement:null,style:"behavior_blocks"},{type:"ask_each_particle",message0:"ask %1 %2 %3",args0:[{type:"field_dropdown",name:"TYPE",options:[["water particles","WATER"],["ink particles","INK"],["all particles","ALL"]]},{type:"input_dummy"},{type:"input_statement",name:"ASK_EACH"}],previousStatement:null,nextStatement:null,style:"control_blocks"},{type:"temperature",message0:"temperature is %1",args0:[{type:"field_dropdown",name:"TEMP",options:[["high","HIGH"],["medium","MEDIUM"],["low","LOW"],["zero","ZERO"]]}],output:"Boolean",style:"control_blocks"},{type:"touching_dropdown",message0:"touching %1",args0:[{type:"field_dropdown",name:"TYPE",options:[["any particle","ANYPARTICLE"],["water particle","WATERPARTICLE"],["ink particle","INKPARTICLE"],["wall","WALL"]]}],output:"Boolean",style:"control_blocks",tooltip:"",helpUrl:""}]),s["a"]["set"]=function(e){var t=s["a"].statementToCode(e,"SET"),n="to blocks-set\n"+s["a"].INDENT+"setup\n"+t+s["a"].INDENT+"reset-ticks\nend\n";return n},s["a"]["go"]=function(e){var t=s["a"].statementToCode(e,"GO"),n="to blocks-go\n"+s["a"].INDENT+"mouse_click\n"+s["a"].INDENT+"go\n"+t+s["a"].INDENT+"tick-advance tick-delta\n"+s["a"].INDENT+"display\nend\n";return n},s["a"]["mouse_click"]=function(e){var t=s["a"].INDENT+"set mouse-up? false\n"+s["a"].statementToCode(e,"MOUSE"),n="if mouse-down? \n[\n"+t+"]";n=i.a.JavaScript.prefixLines(n,s["a"].INDENT);var a="[\n"+s["a"].INDENT+"if not mouse-down?\n"+s["a"].INDENT+"[\n"+s["a"].INDENT+s["a"].INDENT+"set mouse-up? true\n"+s["a"].INDENT+"]\n]\n";a=i.a.JavaScript.prefixLines(a,s["a"].INDENT);var o="ifelse mouse-up? != false\n[\n"+n+"\n]\n";return o=i.a.JavaScript.prefixLines(o,s["a"].INDENT)+a,"to mouse_click\n"+o+"end\n"},s["a"]["controls_if"]=function(e){var t,n,a,o=0,l="";2===e.inputList.length?l+="if ":l+="(ifelse ";do{a=s["a"].valueToCode(e,"IF"+o,s["a"].ORDER_NONE)||"false",t=a.includes("(count collision-enemies > 0) and (collision-candidate != nobody) and (speed > 0 or [speed] of collision-candidate > 0)"),n=t?s["a"].INDENT+"set collision-flag 1\n"+s["a"].statementToCode(e,"DO"+o):s["a"].INDENT+"set collision-flag 0\n"+s["a"].statementToCode(e,"DO"+o),i.a.JavaScript.STATEMENT_SUFFIX&&(n=i.a.JavaScript.prefixLines(i.a.JavaScript.injectId(i.a.JavaScript.STATEMENT_SUFFIX,e),s["a"].INDENT)+n),l+=(o>0?"\n":"")+a+"\n[\n"+n+"]",o++}while(e.getInput("IF"+o));return(e.getInput("ELSE")||i.a.JavaScript.STATEMENT_SUFFIX)&&(n=s["a"].statementToCode(e,"ELSE"),i.a.JavaScript.STATEMENT_SUFFIX&&(n=i.a.JavaScript.prefixLines(i.a.JavaScript.injectId(i.a.JavaScript.STATEMENT_SUFFIX,e),s["a"].INDENT)+n),l+="\n[\n"+n+"]"),2===e.inputList.length?l+="\n":l+=")\n",l+=t?"set collision-flag 0\n":"",l},s["a"]["create_particles"]=function(e){var t,n=e.getRootBlock().type,o=JSON.parse(e.data),l=e.getFieldValue("PARTICLE_NUM"),c=e.getFieldValue("TYPE"),p='set particle-type "'+c.toLowerCase()+'"\nset first-time 1\nset last-collision nobody\nset collision-flag 0\nset collision-hatching 0\n',d="if mouse-down? \n[\n"+s["a"].INDENT+"drop-with-mouse "+l+"\n]";if(o.contextData.CHANGED){var u,m=i.a.Xml.domToBlock(i.a.Xml.textToDom(JSON.parse(e.data).contentXml),this.workspace),E=Object(a["a"])(m.getDescendants());try{for(E.s();!(u=E.n()).done;){var T=u.value;"mouse_click"===n&&"set_position"===T.type&&T.dispose(!0)}}catch(f){E.e(f)}finally{E.f()}t=s["a"].blockToCode(m),m.dispose()}else t=r(e.type,o.unpackBlocks,this.workspace);var N="create-particles "+l+"\n[\n"+i.a.JavaScript.prefixLines(p,s["a"].INDENT)+i.a.JavaScript.prefixLines(t,s["a"].INDENT)+i.a.JavaScript.prefixLines(d,s["a"].INDENT)+"\n]\n";return N},s["a"]["create_particles1"]=function(e){var t=e.getFieldValue("PARTICLE_NUM"),n='set particle-type "'+e.getFieldValue("TYPE").toLowerCase()+'" \nset speed '+s["a"].SPEED["TEMP"]+"\nset mass "+s["a"].MASS["MEDIUM"]+"\nset energy (.5 * mass * speed * speed)\nset first-time 1\nset last-collision nobody\nset collision-flag 0 \nset collision-hatching 0\nset color "+("WATER"===e.getFieldValue("TYPE")?"cyan":"red")+"\nset size "+s["a"].SIZE["MEDIUM"]+"\nsetxy "+s["a"].POSITION["RANDOM"]+"\nset random-wiggle 40\nset heading "+s["a"].HEADING["RANDOM"]+"\nif mouse-down? \n[\n"+s["a"].INDENT+"drop-with-mouse "+t+"\n]",a="create-particles "+t+"\n[\n"+i.a.JavaScript.prefixLines(n,s["a"].INDENT)+"\n]\n";return a},s["a"]["set_speed"]=function(e){var t=s["a"].SPEED[e.getField("SPEED").selectedOption_[1]],n="set random-wiggle 5\nset speed "+t+"\n";return n},s["a"]["set_type"]=function(e){var t=e.getField("TYPE").selectedOption_[0],n='set particle-type "'+t+'"\n';return n},s["a"]["set_mass"]=function(e){var t=s["a"].MASS[e.getField("MASS").selectedOption_[1]],n="set mass "+t+"\nset energy (.5 * mass * speed * speed)\n";return n},s["a"]["set_color"]=function(e){var t=e.getField("COLOR").selectedOption_[0],n="set color "+t+"\n";return n},s["a"]["set_size"]=function(e){var t=s["a"].SIZE[e.getField("SIZE").selectedOption_[1]],n="set size "+t+"\n";return n},s["a"]["set_position"]=function(e){var t=s["a"].POSITION[e.getField("POSITION").selectedOption_[1]],n=e.getField("POSITION").selectedOption_[1],a="MOUSE"!==n?"setxy "+t+"\n":t+"\n";return a},s["a"]["set_heading"]=function(e){var t=s["a"].HEADING[e.getField("HEADING").selectedOption_[1]],n="set random-wiggle 40\nset heading "+t+"\n";return n},s["a"]["move"]=function(){var e="particle-forward\n";return e},s["a"]["interact"]=function(e){var t,n=JSON.parse(e.data);if(n.contextData.CHANGED){var a=i.a.Xml.domToBlock(i.a.Xml.textToDom(JSON.parse(e.data).contentXml),this.workspace);t=s["a"].blockToCode(a),a.dispose()}else t=r(e.type,n.unpackBlocks,this.workspace);return t},s["a"]["collision1"]=function(){var e="bounce-wall\ncheck-for-collision\n";return e},s["a"]["bounce_off"]=function(){var e="ifelse collision-flag = 1\n[\n"+s["a"].INDENT+"collide-with collision-candidate\n"+s["a"].INDENT+"set last-collision collision-candidate\n"+s["a"].INDENT+"ask collision-candidate [ set last-collision myself ]\n]\n[\n"+s["a"].INDENT+"if abs[pxcor] of patch-ahead 1 >= max-pxcor - 4\n"+s["a"].INDENT+"[ set heading (- heading) ]\n"+s["a"].INDENT+"if abs [pycor] of patch-ahead 1 >= max-pycor - 4\n"+s["a"].INDENT+"[ set heading(180 - heading) ]\n]\n";return e},s["a"]["erase"]=function(){var e="ifelse collision-flag = 1\n[\n"+s["a"].INDENT+"set last-collision collision-candidate\n"+s["a"].INDENT+"ask collision-candidate [ set last-collision myself ]\n"+s["a"].INDENT+"ask collision-candidate [ die ]\n]\n[\n"+s["a"].INDENT+"die\n]\n";return e},s["a"]["attach"]=function(){var e="ifelse collision-flag = 1 \n[\n"+s["a"].INDENT+"set last-collision collision-candidate\n"+s["a"].INDENT+"let heading-candidate heading\n"+s["a"].INDENT+"ask collision-candidate\n"+s["a"].INDENT+"[\n"+s["a"].INDENT+s["a"].INDENT+"set last-collision myself\n"+s["a"].INDENT+s["a"].INDENT+"set heading heading-candidate\n"+s["a"].INDENT+"]\n]\n[\n"+s["a"].INDENT+"set speed 0\n]\n";return e},s["a"]["ask_each_particle"]=function(e){var t=e.getField("TYPE").value_||"WATER",n="ALL"===t?"":' with [particle-type = "'+t.toLowerCase()+'"]',a=s["a"].statementToCode(e,"ASK_EACH"),o="ask particles"+n+"\n[\n"+a+"]\n";return o},s["a"]["temperature"]=function(e){switch(e.getFieldValue("TEMP")){case"HIGH":return["temperature > 35",s["a"].ORDER_NONE];case"MEDIUM":return["temperature < 36 and temperature > 14",s["a"].ORDER_NONE];case"LOW":return["temperature < 15 and temperature > 0",s["a"].ORDER_NONE];case"ZERO":return["temperature = 0",s["a"].ORDER_NONE]}},s["a"]["touching_dropdown"]=function(e){var t,n,a=e.getFieldValue("TYPE");if(a.includes("PARTICLE")){n=a.includes("ANY")?"any":e.getField("TYPE").selectedOption_[0].replace(" particle","");var o="any"!=n?' and ([particle-type] of collision-candidate = "'+n+'")':"";t="(count collision-enemies > 0) and (collision-candidate != nobody) and (speed > 0 or [speed] of collision-candidate > 0)"+o}else t="abs [pxcor] of patch-ahead 1 >= max-pxcor - 4 or abs [pycor] of patch-ahead 1 >= max-pycor - 4";return[t,s["a"].ORDER_NONE]}}}]);
//# sourceMappingURL=diffusion.bundle.js.map