!function(e){new(Garnish.Base.extend({$clearAllBtn:null,$table:null,tracesModal:null,$tracesModalBody:null,init:function(){this.$clearAllBtn=e("#clearall"),this.$table=e("#deprecationerrors"),this.$noLogsMessage=e("#nologs"),this.addListener(this.$clearAllBtn,"click","clearAllLogs"),this.addListener(this.$table.find(".viewtraces"),"click","viewLogTraces"),this.addListener(this.$table.find(".delete"),"click","deleteLog")},clearAllLogs:function(){Craft.postActionRequest("utilities/delete-all-deprecation-errors"),this.onClearAll()},viewLogTraces:function(t){if(this.tracesModal)this.tracesModal.$container.addClass("loading"),this.$tracesModalBody.empty(),this.tracesModal.show();else{var l=e('<div id="traces" class="modal loading"/>').appendTo(Garnish.$bod);this.$tracesModalBody=e('<div class="body" tabindex="0"/>').appendTo(l),this.tracesModal=new Garnish.Modal(l,{resizable:!0})}var s={logId:e(t.currentTarget).closest("tr").data("id")};Craft.postActionRequest("utilities/get-deprecation-error-traces-modal",s,(e,t)=>{this.tracesModal.$container.removeClass("loading"),"success"===t&&this.$tracesModalBody.html(e.html)})},deleteLog:function(t){var l=e(t.currentTarget).closest("tr"),s={logId:l.data("id")};Craft.postActionRequest("utilities/delete-deprecation-error",s,(function(e,t){console.log("response/textStatus",e,t)})),l.siblings().length?l.remove():this.onClearAll()},onClearAll:function(){this.$clearAllBtn.parent().remove(),this.$table.remove(),this.$noLogsMessage.removeClass("hidden")}}))}(jQuery);
//# sourceMappingURL=deprecator.min.js.map
