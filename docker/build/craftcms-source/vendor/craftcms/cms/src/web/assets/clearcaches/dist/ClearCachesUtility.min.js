!function(e){Craft.ClearCachesUtility=Garnish.Base.extend({init:function(t){let a=e("form.utility");for(let e=0;e<a.length;e++){let t=a.eq(e),s=t.find("input[type=checkbox]"),r=t.find(".btn"),o=function(){s.filter(":checked").length?r.removeClass("disabled"):r.addClass("disabled")};s.on("change",o),o(),this.addListener(t,"submit",e=>{e.preventDefault(),r.hasClass("disabled")||this.onSubmit(e)})}},onSubmit:function(t){let a,s,r=e(t.currentTarget),o=r.find("button.submit"),i=r.find(".utility-status");o.hasClass("disabled")||(r.data("progressBar")?(a=r.data("progressBar"),a.resetProgressBar(),s=r.data("allDone")):(a=new Craft.ProgressBar(i),r.data("progressBar",a)),a.$progressBar.removeClass("hidden"),a.$progressBar.velocity("stop").velocity({opacity:1},{complete:()=>{let t=Garnish.getPostData(r),n=Craft.expandPostArray(t);Craft.postActionRequest(n.action,n,(t,n)=>{t&&t.error&&alert(t.error),a.setProgressPercentage(100),setTimeout(()=>{s||(s=e('<div class="alldone" data-icon="done" />').appendTo(i),s.css("opacity",0),r.data("allDone",s)),a.$progressBar.velocity({opacity:0},{duration:"fast",complete:()=>{s.velocity({opacity:1},{duration:"fast"}),o.removeClass("disabled"),o.trigger("focus")}})},300)},{complete:e.noop})}}),s&&s.css("opacity",0),o.addClass("disabled"),o.trigger("blur"))}})}(jQuery);
//# sourceMappingURL=ClearCachesUtility.min.js.map
